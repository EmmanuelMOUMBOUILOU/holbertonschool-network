#!/usr/bin/env bash
# This script updates /etc/hosts to resolve localhost to 127.0.0.2 and facebook.com to 8.8.8.8

# Backup /etc/hosts before modifying
cp /etc/hosts /etc/hosts.bak

# Replace localhost's IP to 127.0.0.2 (only if it's mapped to 127.0.0.1)
sed -i 's/^127\.0\.0\.1\s\+localhost/127.0.0.2 localhost/' /etc/hosts

# Add or update facebook.com mapping to 8.8.8.8
if grep -q "facebook.com" /etc/hosts; then
    # If it already exists, replace the line
    sed -i 's/.*facebook\.com.*/8.8.8.8 facebook.com/' /etc/hosts
else
    # If not, add it
    echo "8.8.8.8 facebook.com" >> /etc/hosts
fi
