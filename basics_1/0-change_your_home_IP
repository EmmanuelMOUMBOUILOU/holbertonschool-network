#!/usr/bin/env bash
# This script updates /etc/hosts so that localhost resolves to 127.0.0.2 and facebook.com to 8.8.8.8

# Must be run as root
if [ "$(id -u)" -ne 0 ]; then
  echo "Please run this script as root (sudo)." >&2
  exit 1
fi

# Backup hosts
cp /etc/hosts /etc/hosts.bak

# Remove any existing lines containing 'localhost' or 'facebook.com'
# then append the desired mappings (handled by sed â€” no echo for localhost)
sed -i \
  -e '/[[:space:]]localhost/d' \
  -e '/facebook\.com/d' \
  -e '$a\' -e '127.0.0.2 localhost' \
  -e '$a\' -e '8.8.8.8 facebook.com' \
  /etc/hosts
